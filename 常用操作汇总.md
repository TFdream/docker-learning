# Docker常用操作汇总


## 进入容器
很多时间，我们需要的操作并不仅仅是按镜像所给出的命令启动容器而已，我们还会希望进一步了解容器或操作容器，这时候最佳的方式就是让我们进入到容器了。

我们知道，容器是一个隔离运行环境的东西，它里面除了镜像所规定的主进程外，其他的进程也是能够运行的，Docker 为我们提供了一个命令 ```docker exec``` 来让容器运行我们所给出的命令。

这里我们试试用容器中的 more 命令查看容器的主机名定义。
```
$ sudo docker exec nginx more /etc/hostname
::::::::::::::
/etc/hostname
::::::::::::::
83821ea220ed
```

```docker exec``` 命令能帮助我们在正在运行的容器中运行指定命令，这对于服务控制，运维监控等有着不错的应用场景。但是在开发过程中，我们更常使用它来作为我们进入容器的桥梁。

在 Linux 中，大家熟悉的控制台软件应该是 Shell 和 Bash 了，它们分别由 sh 和 bash 这两个程序启动。

说到这里，有读者一定想到了，既然有这两个控制台程序，我们只要在容器里执行它们，然后通过它们去控制容器内的环境，岂不就可以“自由的飞翔”了吗。没错，这里说的进入容器，就是通过 docker exec 命令来启动 sh 或 bash，并通过它们实现对容器内的虚拟环境的控制。

由于 bash 的功能要比 sh 丰富，所以在能够使用 bash 的容器里，我们优先选择它作为控制台程序。
```
$ sudo docker exec -it nginx bash
root@83821ea220ed:/#
```

在借助 docker exec 进入容器的时候，我们需要特别注意命令中的两个选项不可或缺，即 ```-i``` 和 ```-t``` ( 它们俩可以利用简写机制合并成 ```-it``` )。

其中 ```-i ( --interactive )``` 表示保持我们的输入流，只有使用它才能保证控制台程序能够正确识别我们的命令。而 ```-t ( --tty )``` 表示启用一个伪终端，形成我们与 bash 的交互，如果没有它，我们无法看到 bash 内部的执行结果。

熟悉通过在容器中执行控制台程序进而进入容器这种方法，在开发过程中你能更轻松的观察容器中发生了什么，也更容易排查程序或者环境引起的问题。

## 衔接到容器
Docker 为我们提供了一个 ```docker attach``` 命令，用于将当前的输入输出流连接到指定的容器上。

```
$ sudo docker attach nginx
```

这个命令最直观的效果可以理解为我们将容器中的主程序转为了“前台”运行 ( 与 ```docker run``` 中的 ```-d``` 选项有相反的意思 )。


